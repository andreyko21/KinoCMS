"use strict";(self["webpackChunkkinocms"]=self["webpackChunkkinocms"]||[]).push([[754],{5660:function(e,a,l){l.d(a,{Cf:function(){return n}});var t=l(1609),i=l(36),s=l(1614);function n(){const e=new Date,a=e.getFullYear(),l=e.getMonth()+1,t=e.getDate(),i=e.getHours(),s=e.getMinutes(),n=e.getSeconds();return`${a}${l}${t}${i}${s}${n}`}const o=(0,i.ad)(s.w),r=(0,t.v0)(s.w),g=(0,i.hJ)(o,"users"),c=(0,i.JU)(g,r.currentUser.uid),m=(0,i.hJ)(c,"banners"),d=(0,i.JU)(m,"banner");(0,i.hJ)(d,"MainTop")},6988:function(e,a,l){l.d(a,{Z:function(){return C}});var t=l(3396),i=l(7139);const s={class:"content-block"},n={class:"img-block mb-1"},o={class:"image-wrapper"},r=["src"],g=["src"],c={key:0,class:"error-message"};function m(e,a,l,m,d,u){const h=(0,t.up)("card-component");return(0,t.wg)(),(0,t.j4)(h,{class:"card-dark",title:l.title},{tools:(0,t.w5)((()=>[])),body:(0,t.w5)((()=>[(0,t._)("div",s,[(0,t._)("div",n,[(0,t._)("div",o,[l.imgObject&&l.imgObject.src?((0,t.wg)(),(0,t.iD)("img",{key:0,src:l.imgObject.src,alt:"Uploaded Image",class:"img"},null,8,r)):l.imgObject&&l.imgObject.link?((0,t.wg)(),(0,t.iD)("img",{key:1,src:l.imgObject.link,alt:"Uploaded Image",class:"img"},null,8,g)):(0,t.kq)("",!0),(0,t._)("input",{ref:"fileInput",type:"file",class:"fileInput",accept:"image/*",onChange:a[0]||(a[0]=(...e)=>u.onFileChange&&u.onFileChange(...e))},null,544),l.imgObject.src||l.imgObject.link?((0,t.wg)(),(0,t.iD)("button",{key:2,class:"btn change-img",type:"button",onClick:a[1]||(a[1]=e=>u.SelectFile())}," Змінити ")):(0,t.kq)("",!0),l.imgObject.src||l.imgObject.link?((0,t.wg)(),(0,t.iD)("button",{key:3,class:"btn del-img",type:"button",onClick:a[2]||(a[2]=e=>u.DeleteImage())}," Видалити ")):((0,t.wg)(),(0,t.iD)("button",{key:4,class:"btn add-img",type:"button",onClick:a[3]||(a[3]=e=>u.SelectFile())},"Добавити"))])])]),l.error?((0,t.wg)(),(0,t.iD)("div",c,(0,i.zw)(l.error),1)):(0,t.kq)("",!0)])),_:1},8,["title"])}l(7658);var d=l(1994),u=l(5660),h=l(9242);const p={components:{cardComponent:d.Z},props:{imgObject:{type:Object,default:()=>({id:1,src:"",link:""})},title:String,error:String,deleteList:{type:Array,default:()=>[]}},methods:{DeleteImage(){if(null!=this.imgObject.link){const e=this.deleteList;e.push(this.imgObject.id),this.$emit("update:deleteList",e)}this.$emit("update:imgObject",{})},SelectFile(){this.$refs.fileInput.click()},onFileChange(e){const a=e.target.files[0];if(a){const e=URL.createObjectURL(a),l={id:this.imgObject.id?this.imgObject.id:(0,u.Cf)(),src:e};this.$emit("update:imgObject",l),this.$refs.fileInput.value=""}}}},I=()=>{(0,h.sj)((e=>({"61b5e55e":e.gridRows})))},v=p.setup;p.setup=v?(e,a)=>(I(),v(e,a)):I;var b=p,y=l(89);const $=(0,y.Z)(b,[["render",m],["__scopeId","data-v-3f706300"]]);var C=$},4058:function(e,a,l){l.d(a,{Z:function(){return O}});var t=l(3396),i=l(7139);const s=e=>((0,t.dD)("data-v-22716d53"),e=e(),(0,t.Cn)(),e),n={class:"content-block"},o={class:"img-block mb-1"},r={key:0},g=["src"],c=["src"],m=["onClick"],d=s((()=>(0,t._)("span",null,"Змінити",-1))),u=[d],h=["onClick"],p=s((()=>(0,t._)("span",null,"Видалити",-1))),I=[p],v={class:"image-wrapper d-inline-block"},b={key:0},y={key:0,class:"error-message"};function $(e,a,l,s,d,p){const $=(0,t.up)("card-component");return(0,t.wg)(),(0,t.j4)($,{class:"card-dark",title:"Галерея картинок"},{tools:(0,t.w5)((()=>[])),body:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t._)("div",o,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.imgsArray,(e=>((0,t.wg)(),(0,t.iD)("div",{class:"image-wrapper d-inline-block",key:e.id},[l.imgsArray?((0,t.wg)(),(0,t.iD)("div",r,[e.src?((0,t.wg)(),(0,t.iD)("img",{key:0,src:e.src,alt:"Uploaded Image",class:"img"},null,8,g)):e.link?((0,t.wg)(),(0,t.iD)("img",{key:1,src:e.link,alt:"Uploaded Image",class:"img"},null,8,c)):(0,t.kq)("",!0),(0,t._)("input",{ref_for:!0,ref:"fileInput",type:"file",class:"fileInput",accept:"image/*",onChange:a[0]||(a[0]=(...e)=>p.onFileChange&&p.onFileChange(...e))},null,544),(0,t._)("button",{class:"btn change-img",type:"button",onClick:a=>p.SelectFile(e.id)},u,8,m),l.imgsArray?((0,t.wg)(),(0,t.iD)("button",{key:2,class:"btn del-img",type:"button",onClick:a=>p.DeleteImage(e.id)},I,8,h)):(0,t.kq)("",!0)])):(0,t.kq)("",!0)])))),128)),(0,t._)("div",v,[(0,t._)("input",{ref:"fileInput",type:"file",class:"fileInput",accept:"image/*",onChange:a[1]||(a[1]=(...e)=>p.onFileChange&&p.onFileChange(...e)),multiple:""},null,544),(0,t._)("button",{class:"btn add-img",type:"button",onClick:a[2]||(a[2]=e=>p.SelectFile("new"))},[l.imgsArray?((0,t.wg)(),(0,t.iD)("span",b,"Добавити")):(0,t.kq)("",!0)])])])]),l.error?((0,t.wg)(),(0,t.iD)("div",y,(0,i.zw)(l.error),1)):(0,t.kq)("",!0)])),_:1})}l(7658);var C=l(5660),D=l(1994),H=l(9242);const w={components:{cardComponent:D.Z},data(){return{currentImgId:null}},props:{imgsArray:{type:Array,default:()=>[]},title:String,error:String,deleteList:{type:Array,default:()=>[]}},methods:{DeleteImage(e){if(this.imgsArray.find((a=>a.id===e&&a.link))){const a=this.deleteList;a.push(e),this.$emit("update:deleteList",a)}const a=this.imgsArray.filter((a=>a.id!==e));this.$emit("update:imgsArray",a)},SelectFile(e){this.currentImgId=e,this.$refs.fileInput.click()},onFileChange(e){const a=e.target.files;if(a){const e=this.imgsArray;if("new"!==this.currentImgId&&null!==this.currentImgId){const e=URL.createObjectURL(a[a.length-1]),l=this.imgsArray.map((a=>a.id===this.currentImgId?{...a,src:e}:a));this.$emit("update:imgsArray",l)}else{for(let l=0;l<a.length;l++){const t=URL.createObjectURL(a[l]),i={id:`${(0,C.Cf)()}${l}`,src:t};e.push(i)}this.$emit("update:imgsArray",e)}}e.target.value=null}}},f=()=>{(0,H.sj)((e=>({"3018325b":e.gridRows})))},k=w.setup;w.setup=k?(e,a)=>(f(),k(e,a)):f;var L=w,U=l(89);const _=(0,U.Z)(L,[["render",$],["__scopeId","data-v-22716d53"]]);var O=_},4668:function(e,a,l){l.r(a),l.d(a,{default:function(){return re}});var t=l(3396),i=l(7139),s=l(9242);const n={class:"btn-group btn-group-toggle","data-toggle":"buttons"},o=["id","onClick"];function r(e,a,l,r,g,c){const m=(0,t.up)("card");return(0,t.wg)(),(0,t.j4)(m,{title:g.title,isLoading:g.isLoading},{tools:(0,t.w5)((()=>["add-hall-form"==g.CurrentComponent.name?((0,t.wg)(),(0,t.iD)("button",{key:0,class:"btn btn-block btn-secondary",onClick:a[0]||(a[0]=e=>c.SetCurrentComponent())}," Повернутися до створення кінотеатра ")):(0,t.kq)("",!0),(0,t._)("div",n,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(g.languages,(e=>((0,t.wg)(),(0,t.iD)("label",{key:e.id,class:(0,i.C_)(["btn btn-secondary",{active:e.checked,"is-invalid":r.v$.languages[e.value].$error||r.v$.changeHall[e.value].$error}])},[(0,t._)("input",{type:"radio",name:"options",id:e.name,autocomplete:"off",onClick:a=>c.changeLanguage(e)},null,8,o),(0,t.Uk)(" "+(0,i.zw)(e.name),1)],2)))),128))])])),body:(0,t.w5)((()=>[(0,t._)("form",{action:"",onSubmit:a[2]||(a[2]=(0,s.iM)(((...e)=>c.Save&&c.Save(...e)),["prevent"]))},[((0,t.wg)(),(0,t.j4)((0,t.LL)(g.CurrentComponent),{hallData:g.changeHall[c.currentLanguage.value],onResetHall:c.ResetHall,onResetCinema:c.ResetCinema,onSaveHall:c.SaveHall,onHallData:c.HallUpdate,modelValue:c.currentLanguage.data,"onUpdate:modelValue":a[1]||(a[1]=e=>c.currentLanguage.data=e),onOpen:c.OpenHall,onDeleteHall:c.DeleteHall},null,40,["hallData","onResetHall","onResetCinema","onSaveHall","onHallData","modelValue","onOpen","onDeleteHall"]))],32)])),footer:(0,t.w5)((()=>[])),_:1},8,["title","isLoading"])}l(7658);var g=l(4592),c=l(4219),m=l(5420),d=l(4494),u=l(1994);const h={key:0,class:"error-message"},p={key:1,class:"error-message"},I={key:2,class:"error-message"},v=(0,t._)("span",null,"Скинути зміни",-1),b=[v],y=(0,t._)("span",null,"Зберегти",-1),$=[y];function C(e,a,l,s,n,o){const r=(0,t.up)("input-component"),g=(0,t.up)("textarea-component"),c=(0,t.up)("img-component"),m=(0,t.up)("imgs-component"),d=(0,t.up)("list-halls"),u=(0,t.up)("seo-component");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(r,{label:"Назва кінотеатра",id:"cinemaName",type:"text",placeholder:"Введіть назву кінотеатра",modelValue:e.localName,"onUpdate:modelValue":a[0]||(a[0]=a=>e.localName=a),error:e.v$.localName.$error?"Поле є обовязковим":""},null,8,["modelValue","error"]),(0,t.Wm)(g,{class:"mt-3",label:"Опис",id:"cinemaDescription",type:"textarea",placeholder:"Введіть опис кінотеатра",modelValue:e.localDescription,"onUpdate:modelValue":a[1]||(a[1]=a=>e.localDescription=a),error:e.v$.localDescription.$error?"Поле є обовязковим":""},null,8,["modelValue","error"]),(0,t.Wm)(g,{class:"mt-3",label:"Умови",id:"cinemaCondition",type:"textarea",placeholder:"Введіть умови кінотеатра",modelValue:e.localCondition,"onUpdate:modelValue":a[2]||(a[2]=a=>e.localCondition=a),error:e.v$.localCondition.$error?"Поле є обовязковим":""},null,8,["modelValue","error"]),(0,t.Wm)(c,{imgObject:e.localLogoImg,"onUpdate:imgObject":a[3]||(a[3]=a=>e.localLogoImg=a),class:(0,i.C_)([{"is-invalid":e.v$.localLogoImg.$error},"mt-3"]),deleteList:e.localListDeleteImages,"onUpdate:deleteList":a[4]||(a[4]=a=>e.localListDeleteImages=a),title:"Логотип"},null,8,["imgObject","class","deleteList"]),e.v$.localLogoImg.$error?((0,t.wg)(),(0,t.iD)("p",h,"Виберіть картинку")):(0,t.kq)("",!0),(0,t.Wm)(c,{imgObject:e.localTopBannerImg,"onUpdate:imgObject":a[5]||(a[5]=a=>e.localTopBannerImg=a),class:(0,i.C_)([{"is-invalid":e.v$.localTopBannerImg.$error},"mt-3"]),deleteList:e.localListDeleteImages,"onUpdate:deleteList":a[6]||(a[6]=a=>e.localListDeleteImages=a),title:"Верхній банер"},null,8,["imgObject","class","deleteList"]),e.v$.localTopBannerImg.$error?((0,t.wg)(),(0,t.iD)("p",p,"Виберіть картинку")):(0,t.kq)("",!0),(0,t.Wm)(m,{imgsArray:e.localGalleryImg,"onUpdate:imgsArray":a[7]||(a[7]=a=>e.localGalleryImg=a),class:(0,i.C_)([{"is-invalid":e.v$.localGalleryImg.$error},"mt-3"]),deleteList:e.localListDeleteImages,"onUpdate:deleteList":a[8]||(a[8]=a=>e.localListDeleteImages=a)},null,8,["imgsArray","class","deleteList"]),e.v$.localGalleryImg.$error?((0,t.wg)(),(0,t.iD)("p",I,"Виберіть картинку")):(0,t.kq)("",!0),(0,t.Wm)(d,{modelValue:e.localListHalls,"onUpdate:modelValue":a[9]||(a[9]=a=>e.localListHalls=a),onDeleteHall:o.DeleteHall,onOpen:o.OpenHall},null,8,["modelValue","onDeleteHall","onOpen"]),(0,t.Wm)(u,{modelValue:e.localSEO,"onUpdate:modelValue":a[10]||(a[10]=a=>e.localSEO=a)},null,8,["modelValue"]),"New_Cinema"!==e.$route.params.cinemaId?((0,t.wg)(),(0,t.iD)("button",{key:3,type:"button",onClick:a[11]||(a[11]=a=>e.$emit("resetCinema")),class:"btn btn-xs btn-warning col fileinput-button"},b)):(0,t.kq)("",!0),(0,t._)("button",{type:"submit",onClick:a[12]||(a[12]=(...e)=>o.Save&&o.Save(...e)),class:"btn btn-xs btn-success col fileinput-button"},$)])}var D=l(7316),H=l(599),w=l(7335),f=l(4870),k=l(6988),L=l(4058);const U=e=>((0,t.dD)("data-v-e17ecd22"),e=e(),(0,t.Cn)(),e),_=U((()=>(0,t._)("i",{class:"fas fa-plus-circle"},null,-1))),O=[_],q={class:"table table-sm"},F=U((()=>(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"Назва"),(0,t._)("th",null,"Дата створення"),(0,t._)("th",{style:{width:"250px"}},"Управління")])],-1))),V={key:0},S=["onClick"],j=["onClick"];function E(e,a,l,s,n,o){const r=(0,t.up)("card-component");return(0,t.wg)(),(0,t.j4)(r,{class:"card-dark",title:n.title,isLoading:n.isLoading},{tools:(0,t.w5)((()=>[(0,t._)("button",{class:"button-add",onClick:a[0]||(a[0]=e=>o.OpenHall("New_Hall"))},O)])),body:(0,t.w5)((()=>[(0,t._)("table",q,[F,l.modelValue.length?((0,t.wg)(),(0,t.iD)("tbody",V,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.modelValue,(e=>((0,t.wg)(),(0,t.iD)("tr",{key:e.id},[(0,t._)("td",null,(0,i.zw)(e.name),1),(0,t._)("td",null,(0,i.zw)(e.dateCreate),1),(0,t._)("td",null,[(0,t._)("button",{type:"button",onClick:a=>o.OpenHall(e.id)},"Редагувати",8,S),l.modelValue.length>1?((0,t.wg)(),(0,t.iD)("button",{key:0,onClick:a=>o.DeleteElementListHalls(e.id)},"Видалити",8,j)):(0,t.kq)("",!0)])])))),128))])):(0,t.kq)("",!0)])])),_:1},8,["title","isLoading"])}var A={components:{cardComponent:u.Z},data(){return{title:"Список залів",isLoading:!1}},props:{modelValue:{type:Object}},methods:{OpenHall(e){this.$emit("open",e)},DeleteElementListHalls(e){this.$emit("deleteHall",e)}}},B=l(89);const G=(0,B.Z)(A,[["render",E],["__scopeId","data-v-e17ecd22"]]);var Z=G,N={name:"add-cinema-form",components:{inputComponent:D.Z,seoComponent:w.Z,textareaComponent:H.Z,ImgComponent:k.Z,imgsComponent:L.Z,ListHalls:Z},props:{modelValue:{type:Object,default:()=>({gallery:[]})}},setup(e,{emit:a}){try{const l=(0,c.Xw)(),i=(0,f.iH)(e.modelValue.name),s=(0,f.iH)(e.modelValue.description),n=(0,f.iH)(e.modelValue.condition),o=(0,f.iH)(e.modelValue.logoImg),r=(0,f.iH)(e.modelValue.topBannerImg),g=(0,f.iH)(e.modelValue.galleryImg),m=(0,f.iH)(e.modelValue.listHalls),d=(0,f.iH)(e.modelValue.seo),u=(0,f.iH)(e.modelValue.listDeleteImages),h=()=>{a("update:modelValue",{name:i.value,description:s.value,condition:n.value,logoImg:o.value,topBannerImg:r.value,galleryImg:g.value,listHalls:m.value,seo:d.value,listDeleteImages:u.value})};return(0,t.m0)((()=>{i.value=e.modelValue.name,s.value=e.modelValue.description,n.value=e.modelValue.condition,o.value=e.modelValue.logoImg,r.value=e.modelValue.topBannerImg,g.value=e.modelValue.galleryImg,m.value=e.modelValue.listHalls,d.value=e.modelValue.seo,u.value=e.modelValue.listDeleteImages})),(0,t.YP)([i,s,n,o,r,r,g,m,d,u],h),{v$:l,localName:i,localDescription:s,localCondition:n,localLogoImg:o,localTopBannerImg:r,localGalleryImg:g,localListHalls:m,localSEO:d,localListDeleteImages:u}}catch(l){console.error(l)}},validations(){return{localName:{required:m.C1,$lazy:!0},localDescription:{required:m.C1,$lazy:!0},localCondition:{required:m.C1,$lazy:!0},localLogoImg:{required:m.C1,$lazy:!0},localTopBannerImg:{required:m.C1,$lazy:!0},localGalleryImg:{required:m.C1,$lazy:!0}}},methods:{DeleteHall(e){this.$emit("deleteHall",e)},OpenHall(e){this.$emit("open",e)},Save(){this.v$.$validate()}}};const z=(0,B.Z)(N,[["render",C]]);var R=z,x=l(151);const W={key:0,class:"error-message"},T={key:1,class:"error-message"},X={key:2,class:"error-message"},Y=(0,t._)("span",null,"Скинути зміни",-1),J=[Y],M=(0,t._)("span",null,"Зберегти",-1),K=[M];function P(e,a,l,s,n,o){const r=(0,t.up)("input-component"),g=(0,t.up)("textarea-component"),c=(0,t.up)("img-component"),m=(0,t.up)("imgs-component"),d=(0,t.up)("seo-component");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(r,{label:"Назва зала",id:"hallName",type:"text",placeholder:"Введіть назву зала",modelValue:s.localName,"onUpdate:modelValue":a[0]||(a[0]=e=>s.localName=e),error:s.v$.localName.$error?"Поле є обовязковим":""},null,8,["modelValue","error"]),(0,t.Wm)(g,{class:"mt-3",label:"Опис",id:"hallDescription",type:"textarea",placeholder:"Введіть опис зала",modelValue:s.localDescription,"onUpdate:modelValue":a[1]||(a[1]=e=>s.localDescription=e),error:s.v$.localDescription.$error?"Поле є обовязковим":""},null,8,["modelValue","error"]),(0,t.Wm)(c,{imgObject:s.localSchemeHallImg,"onUpdate:imgObject":a[2]||(a[2]=e=>s.localSchemeHallImg=e),class:(0,i.C_)([{"is-invalid":s.v$.localSchemeHallImg.$error},"mt-3"]),deleteList:s.localListDeleteImages,"onUpdate:deleteList":a[3]||(a[3]=e=>s.localListDeleteImages=e),title:"Схема зала"},null,8,["imgObject","class","deleteList"]),s.v$.localSchemeHallImg.$error?((0,t.wg)(),(0,t.iD)("p",W,"Виберіть картинку")):(0,t.kq)("",!0),(0,t.Wm)(c,{imgObject:s.localTopBannerImg,"onUpdate:imgObject":a[4]||(a[4]=e=>s.localTopBannerImg=e),class:(0,i.C_)([{"is-invalid":s.v$.localTopBannerImg.$error},"mt-3"]),deleteList:s.localListDeleteImages,"onUpdate:deleteList":a[5]||(a[5]=e=>s.localListDeleteImages=e),title:"Верхній банер"},null,8,["imgObject","class","deleteList"]),s.v$.localTopBannerImg.$error?((0,t.wg)(),(0,t.iD)("p",T,"Виберіть картинку")):(0,t.kq)("",!0),(0,t.Wm)(m,{imgsArray:s.localGalleryImg,"onUpdate:imgsArray":a[6]||(a[6]=e=>s.localGalleryImg=e),class:(0,i.C_)([{"is-invalid":s.v$.localGalleryImg.$error},"mt-3"]),deleteList:s.localListDeleteImages,"onUpdate:deleteList":a[7]||(a[7]=e=>s.localListDeleteImages=e)},null,8,["imgsArray","class","deleteList"]),s.v$.localGalleryImg.$error?((0,t.wg)(),(0,t.iD)("p",X,"Виберіть картинку")):(0,t.kq)("",!0),(0,t.Wm)(d,{modelValue:s.localSEO,"onUpdate:modelValue":a[8]||(a[8]=e=>s.localSEO=e)},null,8,["modelValue"]),(0,t._)("button",{type:"button",onClick:a[9]||(a[9]=a=>e.$emit("resetHall",l.hallData.id)),class:"btn btn-xs btn-warning col fileinput-button"},J),(0,t._)("button",{type:"button",onClick:a[10]||(a[10]=(...e)=>o.Save&&o.Save(...e)),class:"btn btn-xs btn-success col fileinput-button"},K)])}var Q={name:"add-hall-form",components:{inputComponent:D.Z,seoComponent:w.Z,textareaComponent:H.Z,ImgComponent:k.Z,imgsComponent:L.Z},props:{hallData:{type:Object,default:()=>({id:"New_Hall",name:"",dateCreate:"",description:"",schemeHallImg:{},topBannerImg:{},listDeleteImages:[],galleryImg:[],seo:{}})}},setup(e,{emit:a}){const l=(0,c.Xw)(),i=(0,f.iH)(e.hallData.id),s=(0,f.iH)(e.hallData.name),n=(0,f.iH)(e.hallData.description),o=(0,f.iH)(e.hallData.schemeHallImg),r=(0,f.iH)(e.hallData.topBannerImg),g=(0,f.iH)(e.hallData.galleryImg),m=(0,f.iH)(e.hallData.seo),d=(0,f.iH)(e.hallData.listDeleteImages),u=()=>{a("hallData",{id:i.value,name:s.value,description:n.value,schemeHallImg:o.value,topBannerImg:r.value,galleryImg:g.value,seo:m.value,listDeleteImages:d.value})};return(0,t.m0)((()=>{i.value=e.hallData.id,s.value=e.hallData.name,n.value=e.hallData.description,o.value=e.hallData.schemeHallImg,r.value=e.hallData.topBannerImg,g.value=e.hallData.galleryImg,m.value=e.hallData.seo,d.value=e.hallData.listDeleteImages||[]})),(0,t.YP)([i,s,n,o,r,r,g,m,d],u),{v$:l,localId:i,localName:s,localDescription:n,localSchemeHallImg:o,localTopBannerImg:r,localGalleryImg:g,localSEO:m,localListDeleteImages:d}},validations(){return{localName:{required:m.C1,$lazy:!0},localDescription:{required:m.C1,$lazy:!0},localSchemeHallImg:{required:m.C1,$lazy:!0},localTopBannerImg:{required:m.C1,$lazy:!0},localGalleryImg:{required:m.C1,$lazy:!0}}},methods:{addImage(e){this.localGalleryImg.push(e)},delImage(e){console.log("del"),this.localListDeleteImages&&this.localListDeleteImages.length||(this.localListDeleteImages=[]),this.localListDeleteImages.push(e)},changeImage(e){this.localGalleryImg=this.localGalleryImg.map((a=>a.id===e.id?e:a))},async Save(){this.$emit("saveHall",this.localId),await this.v$.$validate()}}};const ee=(0,B.Z)(Q,[["render",P]]);var ae=ee,le=l(5660),te=l(373),ie=l.n(te),se=l(8335),ne={components:{card:u.Z,AddCinemaForm:R},setup(){const e=(0,c.Xw)();return{v$:e}},data(){return{validateLanguages:!0,hallDeleteList:[],hallId:0,changeHall:{},cloudFirestore:new d.r,cloudStorage:new x.o,title:"Кінотеатр",CurrentComponent:(0,f.Xl)(R),isLoading:!1,languages:{Ua:{name:"Українська",value:"Ua",checked:!1,collection:g.It,data:{name:"",description:"",condition:"",logoImg:{},topBannerImg:{},galleryImg:[],listHalls:[],seo:{},listDeleteImages:[]}},En:{name:"Англійська",value:"En",checked:!0,collection:g.fh,data:{name:"",description:"",condition:"",logoImg:{},topBannerImg:{},galleryImg:[],listHalls:[],seo:{},listDeleteImages:[]}}}}},validations:{changeHall:{Ua:{name:{required:m.C1},description:{required:m.C1},schemeHallImg:{required:m.C1},topBannerImg:{required:m.C1},galleryImg:{required:m.C1}},En:{name:{required:m.C1},description:{required:m.C1},schemeHallImg:{required:m.C1},topBannerImg:{required:m.C1},galleryImg:{required:m.C1}}},languages:{Ua:{data:{name:{required:m.C1},description:{required:m.C1},condition:{required:m.C1},logoImg:{required:m.C1},listHalls:{required:m.C1},topBannerImg:{required:m.C1},galleryImg:{required:m.C1}}},En:{data:{name:{required:m.C1},description:{required:m.C1},condition:{required:m.C1},logoImg:{required:m.C1},listHalls:{required:m.C1},topBannerImg:{required:m.C1},galleryImg:{required:m.C1}}}}},computed:{currentLanguage(){return!0===this.languages.Ua.checked?this.languages.Ua:this.languages.En},id(){return"New_Cinema"!==this.$route.params.cinemaId?this.$route.params.cinemaId:(0,le.Cf)()}},created(){this.GetCinema(this.languages.Ua),this.GetCinema(this.languages.En)},methods:{SetCurrentComponent(){this.v$.changeHall.$reset(),this.CurrentComponent=(0,f.Xl)(R)},async SaveHall(e){if(await this.v$.changeHall.$validate()){if(this.changeHall.Ua.dateCreate=se.ou.now().toFormat("dd.LL.yyyy"),this.changeHall.En.dateCreate=se.ou.now().toFormat("dd.LL.yyyy"),this.languages.En.data.listHalls.some((a=>a.id===e))){const a=this.languages.Ua.data.listHalls.findIndex((a=>a.id===e));this.languages.Ua.data.listHalls[a]=this.changeHall.Ua,this.languages.En.data.listHalls[a]=this.changeHall.En}else this.languages.Ua.data.listHalls.push(this.changeHall.Ua),this.languages.En.data.listHalls.push(this.changeHall.En);this.CurrentComponent=(0,f.Xl)(R),ie().success("Зал успішно збережено")}else ie().warning("Заповніть всі дані")},ResetHall(e){this.changeHall[this.currentLanguage.value]=this.languages[this.currentLanguage.value].data.listHalls.find((a=>a.id===e)),ie().warning("Дані скинуто")},HallUpdate(e){this.changeHall[this.currentLanguage.value]=e},DeleteHall(e){console.log(e),this.languages.Ua.data.listHalls=this.languages.Ua.data.listHalls.filter((a=>a.id!==e)),this.languages.En.data.listHalls=this.languages.En.data.listHalls.filter((a=>a.id!==e)),this.hallDeleteList.push(e)},OpenHall(e){console.log(e),"New_Hall"!==e?(this.changeHall.En=this.languages.En.data.listHalls.find((a=>a.id===e)),this.changeHall.Ua=this.languages.Ua.data.listHalls.find((a=>a.id===e))):(this.changeHall.En={id:(0,le.Cf)(),name:"",description:"",schemeHallImg:{},topBannerImg:{},galleryImg:[],seo:{}},this.changeHall.Ua={id:(0,le.Cf)(),name:"",description:"",schemeHallImg:{},topBannerImg:{},galleryImg:[],seo:{}}),this.CurrentComponent=(0,f.Xl)(ae)},GetCinema(e){this.cloudFirestore.getDocument(e.collection,this.$route.params.cinemaId).then((a=>{a?Object.assign(e.data,a):"New_Cinema"!==this.$route.params.cinemaId&&this.$router.push("/Cinemas")}))},GetHall(e){this.cloudFirestore.getDocument(e.collection,this.$route.params.cinemaId).then((a=>{a?Object.assign(e.data.listHalls,a.listHalls):"New_Cinema"!==this.$route.params.cinemaId&&this.$router.push("/Cinemas")}))},changeLanguage(e){this.languages.Ua.name===e.name?(this.languages.Ua.checked=!0,this.languages.En.checked=!1):(this.languages.Ua.checked=!1,this.languages.En.checked=!0)},async DeleteFirebaseImages(e,a){if(void 0!==e&&e.length>0)for(const l of e)await this.cloudStorage.DeleteFileInFirebaseStorage(a,l)},async AddFirebaseImage(e,a){e.src?(e.link=await this.cloudStorage.UploadFile(a,e),delete e.src):e={}},async AddFirebaseImages(e,a){if(e&&e.length)for(let l=0;l<e.length;l++){const t=e[l];t.src&&(t.link=await this.cloudStorage.UploadFile(a,t),delete t.src)}},async AddFirebaseData(e,a){const l=await{fileName:this.id,name:e.name,description:e.description,condition:e.condition,logoImg:e.logoImg,topBannerImg:e.topBannerImg,galleryImg:e.galleryImg,listHalls:e.listHalls,seo:e.seo};await this.cloudFirestore.AddDocument(a,this.id,l)},async ResetCinema(){this.isLoading=!0,await this.GetCinema(this.currentLanguage),await this.GetHall(this.languages.Ua),await this.GetHall(this.languages.En),ie().success("Дані успішно скинуто"),this.isLoading=!1},async Save(){if(this.isLoading=!0,await this.v$.languages.$validate()){for(const e of this.hallDeleteList)await this.cloudStorage.DeleteFolderInFirebaseStorage(`cinemas/En/${this.id}/${e}`),await this.cloudStorage.DeleteFolderInFirebaseStorage(`cinemas/Ua/${this.id}/${e}`),this.hallDeleteList=[];await this.DeleteFirebaseImages(this.languages.Ua.data.listDeleteImages,`cinemas/${this.languages.Ua.value}/${this.id}`),this.languages.Ua.data.listDeleteImages=[];for(const e of this.languages.Ua.data.listHalls)await this.DeleteFirebaseImages(e.listDeleteImages,`cinemas/${this.languages.Ua.value}/${this.id}/${e.id}`),e.listDeleteImages=[];await this.AddFirebaseImage(this.languages.Ua.data.logoImg,`cinemas/${this.languages.Ua.value}/${this.id}`),await this.AddFirebaseImage(this.languages.Ua.data.topBannerImg,`cinemas/${this.languages.Ua.value}/${this.id}`),await this.AddFirebaseImages(this.languages.Ua.data.galleryImg,`cinemas/${this.languages.Ua.value}/${this.id}`);for(const e of this.languages.Ua.data.listHalls)await this.AddFirebaseImage(e.schemeHallImg,`cinemas/${this.languages.Ua.value}/${this.id}/${e.id}`);for(const e of this.languages.Ua.data.listHalls)await this.AddFirebaseImage(e.topBannerImg,`cinemas/${this.languages.Ua.value}/${this.id}/${e.id}`);for(const e of this.languages.Ua.data.listHalls)await this.AddFirebaseImages(e.galleryImg,`cinemas/${this.languages.Ua.value}/${this.id}/${e.id}`);await this.AddFirebaseData(this.languages.Ua.data,g.It),await this.DeleteFirebaseImages(this.languages.En.data.listDeleteImages,`cinemas/${this.languages.En.value}/${this.id}`),this.languages.En.data.listDeleteImages=[];for(const e of this.languages.Ua.data.listHalls)await this.DeleteFirebaseImages(e.listDeleteImages,`cinemas/${this.languages.Ua.value}/${this.id}/${e.id}`),e.listDeleteImages=[];await this.AddFirebaseImage(this.languages.En.data.logoImg,`cinemas/${this.languages.En.value}/${this.id}`),await this.AddFirebaseImage(this.languages.En.data.topBannerImg,`cinemas/${this.languages.En.value}/${this.id}`),await this.AddFirebaseImages(this.languages.En.data.galleryImg,`cinemas/${this.languages.En.value}/${this.id}`);for(const e of this.languages.En.data.listHalls)await this.AddFirebaseImage(e.schemeHallImg,`cinemas/${this.languages.En.value}/${this.id}/${e.id}`);for(const e of this.languages.En.data.listHalls)await this.AddFirebaseImage(e.topBannerImg,`cinemas/${this.languages.En.value}/${this.id}/${e.id}`);for(const e of this.languages.En.data.listHalls)await this.AddFirebaseImages(e.galleryImg,`cinemas/${this.languages.En.value}/${this.id}/${e.id}`);await this.AddFirebaseData(this.languages.En.data,g.fh),ie().success("Дані успішно збережено")}else ie().warning("Введіть всі дані");this.isLoading=!1}}};const oe=(0,B.Z)(ne,[["render",r],["__scopeId","data-v-6fcb0d0d"]]);var re=oe}}]);
//# sourceMappingURL=754.7e9c883c.js.map