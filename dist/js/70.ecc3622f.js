"use strict";(self["webpackChunkkinocms"]=self["webpackChunkkinocms"]||[]).push([[70],{6769:function(e,t,l){l.r(t),l.d(t,{default:function(){return I}});var i=l(3396);function a(e,t,l,a,n,s){const o=(0,i.up)("list-films");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(o,{param:"<=",title:"Список поточних фільмів"}),(0,i.Wm)(o,{param:">",title:"Список фільмів, які покажуть незабаром"})],64)}var n=l(7139);const s=e=>((0,i.dD)("data-v-88ac1dd8"),e=e(),(0,i.Cn)(),e),o=s((()=>(0,i._)("i",{class:"fas fa-plus-circle"},null,-1))),d=[o],r={class:"list d-inline-block"},c={class:"item"},m={class:"image-wrapper"},u=["onClick"],p=s((()=>(0,i._)("span",null,"Змінити",-1))),h=[p],g=["onClick"],w=s((()=>(0,i._)("span",null,"Видалити",-1))),b=[w],f=["src","alt"];function _(e,t,l,a,s,o){const p=(0,i.up)("modal-component"),w=(0,i.up)("card-component");return(0,i.wg)(),(0,i.j4)(w,{class:"card-dark",title:l.title},{tools:(0,i.w5)((()=>[(0,i._)("button",{class:"button-add",onClick:t[0]||(t[0]=e=>o.OpenFilm("New_Film"))},d)])),body:(0,i.w5)((()=>[(0,i._)("div",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.filmsList,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"d-inline-block",key:e.id},[(0,i._)("div",c,[(0,i._)("div",m,[(0,i._)("button",{class:"btn change-img",type:"button",onClick:t=>o.OpenFilm(e.fileName)},h,8,u),(0,i._)("button",{class:"btn del-img",type:"button",onClick:t=>o.Delete(e.fileName)},b,8,g),(0,i._)("img",{class:"img",src:e.mainPicture.link,alt:e.imgAlt},null,8,f)]),(0,i._)("p",null,(0,n.zw)(e.filmName),1)])])))),128))]),(0,i.Wm)(p,{modelValue:s.showWarning,"onUpdate:modelValue":t[1]||(t[1]=e=>s.showWarning=e),id:s.deleteFilmName,onDelete:o.DeleteFilm},null,8,["modelValue","id","onDelete"])])),_:1},8,["title"])}l(7658);var D=l(117),F=l(36),k=l(4592),y=l(151),v=l(4494),C=l(8335),S=l(3027),V={components:{cardComponent:D.Z,ModalComponent:S.Z},data(){return{filmsList:[],cloudFirestore:new v.r,cloudStorage:new y.o,deleteFilmName:"",showWarning:!1}},props:{param:String,title:String},created(){this.GetFilm()},methods:{OpenFilm(e){this.$router.push(`Films/${e}`)},Delete(e){this.deleteFilmName=e,this.showWarning=!0},async DeleteFilm(e){this.deleteFilmName=e,this.showWarning=!0,await this.cloudStorage.DeleteFolderInFirebaseStorage(`films/En/${e}`),await this.cloudStorage.DeleteFolderInFirebaseStorage(`films/Ua/${e}`),await this.cloudFirestore.DeleteDocument(k.DV,e),await this.cloudFirestore.DeleteDocument(k.mV,e),this.filmsList=this.filmsList.filter((t=>t.id!==e))},async GetFilm(){this.ListDeleteImages=[];try{const e=await this.cloudFirestore.GetFilteredDocuments(k.mV,(0,F.ar)("releaseDate",this.param,C.ou.now().toFormat("yyyy-LL-dd")));this.filmsList=e.docs.map((e=>e.data()))}catch(e){console.error("Error getting documents: ",e)}}}},L=l(89);const N=(0,L.Z)(V,[["render",_],["__scopeId","data-v-88ac1dd8"]]);var W=N,$={components:{listFilms:W},data(){return{show:!0}}};const Z=(0,L.Z)($,[["render",a]]);var I=Z},3027:function(e,t,l){l.d(t,{Z:function(){return w}});var i=l(3396),a=l(7139);const n={class:"modal-dialog"},s={class:"modal-content bg-warning"},o={class:"modal-header"},d=(0,i._)("h4",{class:"modal-title"},"Ви дійсно хочете видалити фільм?",-1),r=(0,i._)("span",{"aria-hidden":"true"},"×",-1),c=[r],m={class:"modal-footer justify-content-between"};function u(e,t,l,r,u,p){return(0,i.wg)(),(0,i.iD)("div",{class:(0,a.C_)(["modal fade",{show:l.modelValue}]),style:(0,a.j5)(p.modalStyle)},[(0,i._)("div",n,[(0,i._)("div",s,[(0,i._)("div",o,[d,(0,i._)("button",{type:"button",class:"close","data-dismiss":"modal",onClick:t[0]||(t[0]=(...e)=>p.Cancel&&p.Cancel(...e))},c)]),(0,i._)("div",m,[(0,i._)("button",{type:"button",class:"btn btn-outline-dark",onClick:t[1]||(t[1]=(...e)=>p.Cancel&&p.Cancel(...e))},"Відмінити"),(0,i._)("button",{type:"button",class:"btn btn-outline-dark",onClick:t[2]||(t[2]=(...e)=>p.Delete&&p.Delete(...e))},"Видалити")])])])],6)}var p={props:{id:String,message:String,modelValue:{type:Boolean,default:!0}},computed:{modalStyle(){return this.modelValue?{display:"block",paddingRight:"21px"}:{}}},methods:{Delete(){this.$emit("delete",this.id),this.$emit("update:modelValue",!1)},Cancel(){this.$emit("update:modelValue",!1)}}},h=l(89);const g=(0,h.Z)(p,[["render",u]]);var w=g}}]);
//# sourceMappingURL=70.ecc3622f.js.map