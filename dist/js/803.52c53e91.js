"use strict";(self["webpackChunkkinocms"]=self["webpackChunkkinocms"]||[]).push([[803],{3027:function(e,t,l){l.d(t,{Z:function(){return w}});var n=l(3396),o=l(7139);const a={class:"modal-dialog"},s={class:"modal-content bg-warning"},i={class:"modal-header"},d=(0,n._)("h4",{class:"modal-title"},"Ви дійсно хочете видалити фільм?",-1),c=(0,n._)("span",{"aria-hidden":"true"},"×",-1),u=[c],r={class:"modal-footer justify-content-between"};function m(e,t,l,c,m,h){return(0,n.wg)(),(0,n.iD)("div",{class:(0,o.C_)(["modal fade",{show:l.modelValue}]),style:(0,o.j5)(h.modalStyle)},[(0,n._)("div",a,[(0,n._)("div",s,[(0,n._)("div",i,[d,(0,n._)("button",{type:"button",class:"close","data-dismiss":"modal",onClick:t[0]||(t[0]=(...e)=>h.Cancel&&h.Cancel(...e))},u)]),(0,n._)("div",r,[(0,n._)("button",{type:"button",class:"btn btn-outline-dark",onClick:t[1]||(t[1]=(...e)=>h.Cancel&&h.Cancel(...e))},"Відмінити"),(0,n._)("button",{type:"button",class:"btn btn-outline-dark",onClick:t[2]||(t[2]=(...e)=>h.Delete&&h.Delete(...e))},"Видалити")])])])],6)}var h={props:{id:String,message:String,modelValue:{type:Boolean,default:!0}},computed:{modalStyle(){return this.modelValue?{display:"block",paddingRight:"21px"}:{}}},methods:{Delete(){this.$emit("delete",this.id),this.$emit("update:modelValue",!1)},Cancel(){this.$emit("update:modelValue",!1)}}},p=l(89);const b=(0,p.Z)(h,[["render",m]]);var w=b},1869:function(e,t,l){l.r(t),l.d(t,{default:function(){return Z}});var n=l(3396);function o(e,t,l,o,a,s){const i=(0,n.up)("list-news");return(0,n.wg)(),(0,n.j4)(i)}function a(e,t,l,o,a,s){const i=(0,n.up)("table-component"),d=(0,n.up)("modal-component");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(i,{title:"Список новин",isLoading:a.isLoading,modelValue:a.table,"onUpdate:modelValue":t[0]||(t[0]=e=>a.table=e),onDelete:s.Delete,onUpdateList:s.UpdateLIst},null,8,["isLoading","modelValue","onDelete","onUpdateList"]),(0,n.Wm)(d,{modelValue:a.showWarning,"onUpdate:modelValue":t[1]||(t[1]=e=>a.showWarning=e),id:a.deleteElement,onDelete:s.DeleteFile},null,8,["modelValue","id","onDelete"])],64)}var s=l(4592),i=l(7139);const d=e=>((0,n.dD)("data-v-b9f34546"),e=e(),(0,n.Cn)(),e),c=d((()=>(0,n._)("i",{class:"fas fa-sync-alt"},null,-1))),u=[c],r=d((()=>(0,n._)("i",{class:"fas fa-plus-circle"},null,-1))),m=[r],h={class:"table table-sm"},p={class:"list-line"},b=["onClick"],w=d((()=>(0,n._)("i",{class:"fas fa-pencil-alt"},null,-1))),g=[w],_=["onClick"],f=d((()=>(0,n._)("i",{class:"fas fa-trash-alt"},null,-1))),D=[f];function k(e,t,l,o,a,s){const d=(0,n.up)("card-component");return(0,n.wg)(),(0,n.j4)(d,{title:"Список новин"},{tools:(0,n.w5)((()=>[(0,n._)("button",{type:"button",class:"btn btn-tool",onClick:t[0]||(t[0]=(...e)=>s.UpdateLIst&&s.UpdateLIst(...e))},u),(0,n._)("button",{onClick:t[1]||(t[1]=e=>s.NewElement()),class:"button-list"},m)])),body:(0,n.w5)((()=>[(0,n._)("table",h,[(0,n._)("thead",null,[(0,n._)("tr",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.modelValue.thead,(e=>((0,n.wg)(),(0,n.iD)("th",{key:e},(0,i.zw)(e),1)))),128))])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.modelValue.tbody,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.id},[(0,n._)("td",p,(0,i.zw)(e.name),1),(0,n._)("td",null,(0,i.zw)(e.datePublication),1),(0,n._)("td",null,(0,i.zw)(!0===e.checkedPage?"Вкл":"Викл"),1),(0,n._)("td",null,[(0,n._)("button",{onClick:t=>s.EditElement(e.fileName),class:"button-list"},g,8,b),(0,n._)("button",{onClick:t=>s.DeleteElement(e.fileName),class:"button-list"},D,8,_)])])))),128))])])])),_:1})}l(7658);var y=l(1994),C={components:{cardComponent:y.Z},props:{modelValue:Object},methods:{DeleteElement(e){this.$emit("delete",e)},UpdateLIst(){this.$emit("updateList")},EditElement(e){this.$router.push(`/News/${e}`)},NewElement(){this.$router.push("/News/New_News")}}},L=l(89);const v=(0,L.Z)(C,[["render",k],["__scopeId","data-v-b9f34546"]]);var E=v,V=l(4494),N=l(151),F=l(3027),U={components:{tableComponent:E,ModalComponent:F.Z},data(){return{isLoading:!1,cloudFirestore:new V.r,cloudStorage:new N.o,deleteElement:"",showWarning:!1,table:{thead:["Назва","Дата створення","Статус","Управління"],tbody:[]}}},created(){this.GetList()},methods:{Delete(e){this.deleteElement=e,this.showWarning=!0},UpdateLIst(){this.GetList()},async DeleteFile(e){this.isLoading=!0,this.deleteElement=e,console.log(e),this.showWarning=!0,await this.cloudStorage.DeleteFolderInFirebaseStorage(`News/En/${e}`),await this.cloudStorage.DeleteFolderInFirebaseStorage(`News/Ua/${e}`),await this.cloudFirestore.DeleteDocument(s.nK,e),await this.cloudFirestore.DeleteDocument(s.EB,e),this.GetList(),this.isLoading=!1},async GetList(){try{this.isLoading=!0;const e=await this.cloudFirestore.GetAllDocuments(s.nK);this.table.tbody=e.docs.map((e=>e.data())),this.isLoading=!1}catch(e){console.error("Error getting documents: ",e)}}}};const $=(0,L.Z)(U,[["render",a]]);var S=$,I={components:{listNews:S}};const W=(0,L.Z)(I,[["render",o]]);var Z=W}}]);
//# sourceMappingURL=803.52c53e91.js.map