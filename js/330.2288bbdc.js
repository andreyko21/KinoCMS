"use strict";(self["webpackChunkkinocms"]=self["webpackChunkkinocms"]||[]).push([[330],{5660:function(e,t,a){a.d(t,{Cf:function(){return o}});var i=a(1609),n=a(36),l=a(1614);function o(){const e=new Date,t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate(),n=e.getHours(),l=e.getMinutes(),o=e.getSeconds();return`${t}${a}${i}${n}${l}${o}`}const s=(0,n.ad)(l.w),d=(0,i.v0)(l.w),c=(0,n.hJ)(s,"users"),r=(0,n.JU)(c,d.currentUser.uid),u=(0,n.hJ)(r,"banners"),m=(0,n.JU)(u,"banner");(0,n.hJ)(m,"MainTop")},8762:function(e,t,a){a.d(t,{Z:function(){return m}});var i=a(3396);const n=e=>((0,i.dD)("data-v-bb536a1a"),e=e(),(0,i.Cn)(),e),l={class:"box-1"},o=["checked"],s=n((()=>(0,i._)("span",{class:"toogle"},null,-1)));function d(e,t,a,n,d,c){return(0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("input",{checked:!a.modelValue,onChange:t[0]||(t[0]=t=>e.$emit("update:modelValue",!a.modelValue)),id:"2",type:"checkbox"},null,40,o),s])}var c={props:{id:String,label:String,modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}}},r=a(89);const u=(0,r.Z)(c,[["render",d],["__scopeId","data-v-bb536a1a"]]);var m=u},6988:function(e,t,a){a.d(t,{Z:function(){return k}});var i=a(3396),n=a(7139);const l={class:"content-block"},o={class:"img-block mb-1"},s={class:"image-wrapper"},d=["src"],c=["src"],r={key:0,class:"error-message"};function u(e,t,a,u,m,g){const p=(0,i.up)("card-component");return(0,i.wg)(),(0,i.j4)(p,{class:"card-dark",title:a.title},{tools:(0,i.w5)((()=>[])),body:(0,i.w5)((()=>[(0,i._)("div",l,[(0,i._)("div",o,[(0,i._)("div",s,[a.imgObject&&a.imgObject.src?((0,i.wg)(),(0,i.iD)("img",{key:0,src:a.imgObject.src,alt:"Uploaded Image",class:"img"},null,8,d)):a.imgObject&&a.imgObject.link?((0,i.wg)(),(0,i.iD)("img",{key:1,src:a.imgObject.link,alt:"Uploaded Image",class:"img"},null,8,c)):(0,i.kq)("",!0),(0,i._)("input",{ref:"fileInput",type:"file",class:"fileInput",accept:"image/*",onChange:t[0]||(t[0]=(...e)=>g.onFileChange&&g.onFileChange(...e))},null,544),a.imgObject.src||a.imgObject.link?((0,i.wg)(),(0,i.iD)("button",{key:2,class:"btn change-img",type:"button",onClick:t[1]||(t[1]=e=>g.SelectFile())}," Змінити ")):(0,i.kq)("",!0),a.imgObject.src||a.imgObject.link?((0,i.wg)(),(0,i.iD)("button",{key:3,class:"btn del-img",type:"button",onClick:t[2]||(t[2]=e=>g.DeleteImage())}," Видалити ")):((0,i.wg)(),(0,i.iD)("button",{key:4,class:"btn add-img",type:"button",onClick:t[3]||(t[3]=e=>g.SelectFile())},"Добавити"))])])]),a.error?((0,i.wg)(),(0,i.iD)("div",r,(0,n.zw)(a.error),1)):(0,i.kq)("",!0)])),_:1},8,["title"])}a(7658);var m=a(1994),g=a(5660),p=a(9242);const h={components:{cardComponent:m.Z},props:{imgObject:{type:Object,default:()=>({id:1,src:"",link:""})},title:String,error:String,deleteList:{type:Array,default:()=>[]}},methods:{DeleteImage(){if(null!=this.imgObject.link){const e=this.deleteList;e.push(this.imgObject.id),this.$emit("update:deleteList",e)}this.$emit("update:imgObject",{})},SelectFile(){this.$refs.fileInput.click()},onFileChange(e){const t=e.target.files[0];if(t){const e=URL.createObjectURL(t),a={id:this.imgObject.id?this.imgObject.id:(0,g.Cf)(),src:e};this.$emit("update:imgObject",a),this.$refs.fileInput.value=""}}}},b=()=>{(0,p.sj)((e=>({"61b5e55e":e.gridRows})))},v=h.setup;h.setup=v?(e,t)=>(b(),v(e,t)):b;var I=h,f=a(89);const L=(0,f.Z)(I,[["render",u],["__scopeId","data-v-3f706300"]]);var k=L},5402:function(e,t,a){a.d(t,{Z:function(){return u}});var i=a(3396),n=a(7139);const l={class:"btn-group btn-group-toggle"},o=["id","onClick"];function s(e,t,a,s,d,c){return(0,i.wg)(),(0,i.iD)("div",l,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.languages,(e=>((0,i.wg)(),(0,i.iD)("label",{key:e.id,class:(0,n.C_)(["btn btn-secondary",{active:e.checked,error:a.error[e.id].$errors.length}])},[(0,i._)("input",{type:"radio",name:"options",id:e.name,autocomplete:"off",onClick:t=>c.changeLanguage(e.id)},null,8,o),(0,i.Uk)(" "+(0,n.zw)(e.name),1)],2)))),128))])}var d={props:{error:Object,languages:{type:Array,default:()=>[{id:0,name:"",abbreviation:"",checked:!1}]}},methods:{changeLanguage(e){for(const t of this.languages)t.id===e?t.checked=!0:!0===t.checked&&(t.checked=!1)}}},c=a(89);const r=(0,c.Z)(d,[["render",s],["__scopeId","data-v-1fd42b0c"]]);var u=r},3532:function(e,t,a){a.r(t),a.d(t,{default:function(){return q}});var i=a(3396);const n=(0,i._)("span",null,"Скинути зміни",-1),l=[n],o=(0,i._)("span",null,"Зберегти",-1),s=[o];function d(e,t,a,n,o,d){const c=(0,i.up)("checkbox-component"),r=(0,i.up)("language-component"),u=(0,i.up)("contact-form"),m=(0,i.up)("card");return(0,i.wg)(),(0,i.j4)(m,{title:o.title,isLoading:o.isLoading},{tools:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(c,{modelValue:o.checkedPage,"onUpdate:modelValue":t[0]||(t[0]=e=>o.checkedPage=e)},null,8,["modelValue"])]),(0,i.Wm)(r,{languages:o.languages,"onUpdate:languages":t[1]||(t[1]=e=>o.languages=e),error:n.v$.languages},null,8,["languages","error"])])),body:(0,i.w5)((()=>[(0,i.Wm)(u,{modelValue:d.currentLanguage.data,"onUpdate:modelValue":t[2]||(t[2]=e=>d.currentLanguage.data=e)},null,8,["modelValue"]),(0,i._)("button",{type:"button",onClick:t[3]||(t[3]=(...e)=>d.Reset&&d.Reset(...e)),class:"btn btn-xs btn-warning col fileinput-button"},l),(0,i._)("button",{type:"submit",onClick:t[4]||(t[4]=(...e)=>d.Save&&d.Save(...e)),class:"btn btn-xs btn-success col fileinput-button"},s)])),_:1},8,["title","isLoading"])}a(7658);var c=a(8762),r=a(4494),u=a(151),m=a(4219),g=a(5420),p=a(4592),h=a(5402),b=a(1994),v=a(373),I=a.n(v),f=a(8335);const L={action:""};function k(e,t,a,n,l,o){const s=(0,i.up)("cinema-component"),d=(0,i.up)("seo-component");return(0,i.wg)(),(0,i.iD)("form",L,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.cinemaList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id},[(0,i.Wm)(s,{modelValue:n.cinemaList[e.id],"onUpdate:modelValue":t=>n.cinemaList[e.id]=t},null,8,["modelValue","onUpdate:modelValue"])])))),128)),(0,i.Wm)(d,{modelValue:n.seo,"onUpdate:modelValue":t[0]||(t[0]=e=>n.seo=e)},null,8,["modelValue"])])}var w=a(7139);function V(e,t,a,n,l,o){const s=(0,i.up)("input-component"),d=(0,i.up)("textarea-component"),c=(0,i.up)("img-component"),r=(0,i.up)("card-component");return(0,i.wg)(),(0,i.j4)(r,{title:"Кінотеатр",class:"card-dark mt-3"},{tools:(0,i.w5)((()=>[])),body:(0,i.w5)((()=>[(0,i.Wm)(s,{label:"Назва кінотеатра",id:n.id+"name",type:"text",placeholder:"Введіть назву кінотеатра...",modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e)},null,8,["id","modelValue"]),(0,i.Wm)(d,{class:"mt-3",label:"Адреса",id:n.id+"address",type:"textarea",placeholder:"Введіть адресу",modelValue:n.address,"onUpdate:modelValue":t[1]||(t[1]=e=>n.address=e)},null,8,["id","modelValue"]),(0,i.Wm)(s,{label:"Координати",id:n.id+"coordinates",type:"text",placeholder:"Координати",modelValue:n.coordinates,"onUpdate:modelValue":t[2]||(t[2]=e=>n.coordinates=e)},null,8,["id","modelValue"]),(0,i.Wm)(c,{imgObject:n.logoImg,"onUpdate:imgObject":t[3]||(t[3]=e=>n.logoImg=e),deleteList:n.deleteImgList,"onUpdate:deleteList":t[4]||(t[4]=e=>n.deleteImgList=e),class:(0,w.C_)([{"is-invalid":!1},"mt-3"]),title:"Логотип"},null,8,["imgObject","deleteList"])])),_:1})}var y=a(6988),C=a(7316),j=a(4870),F=a(599),O={name:"cinema-component",components:{cardComponent:b.Z,inputComponent:C.Z,TextareaComponent:F.Z,imgComponent:y.Z},props:{modelValue:{type:Object,default:()=>({id:0,name:"",address:"",coordinates:"",logoImg:{},deleteImgList:[]})}},setup(e,{emit:t}){const a=(0,j.iH)(e.modelValue.id),n=(0,j.iH)(e.modelValue.name),l=(0,j.iH)(e.modelValue.address),o=(0,j.iH)(e.modelValue.coordinates),s=(0,j.iH)(e.modelValue.logoImg),d=(0,j.iH)(e.modelValue.deleteImgList),c=()=>{t("update:modelValue",{id:a.value?a.value:"",name:n.value?n.value:"",address:l.value?l.value:"",coordinates:o.value?o.value:"",logoImg:s.value?s.value:{},deleteImgList:d.value?d.value:[]})};return(0,i.m0)((()=>{a.value=e.modelValue.id,n.value=e.modelValue.name,l.value=e.modelValue.address,o.value=e.modelValue.coordinates,s.value=e.modelValue.logoImg,d.value=e.modelValue.deleteImgList})),(0,i.YP)([a,n,l,o,s,d],c),{id:a,name:n,address:l,coordinates:o,logoImg:s,deleteImgList:d}}},$=a(89);const D=(0,$.Z)(O,[["render",V]]);var _=D,U=a(7335),S={components:{SeoComponent:U.Z,CinemaComponent:_},props:{modelValue:{type:Object,default:()=>({cinemaList:[{id:1,name:"",address:"",coordinates:"",logoImg:"",deleteImgList:[]}],seo:{},deleteImgList:[]})}},setup(e,{emit:t}){const a=(0,j.iH)(e.modelValue.cinema),n=(0,j.iH)(e.modelValue.seo),l=(0,j.iH)(e.modelValue.deleteImgList),o=()=>{t("update:modelValue",{cinemaList:a.value?a.value:[],seo:n.value?n.value:{},deleteImgList:l.value?l.value:[]})};return(0,i.m0)((()=>{a.value=e.modelValue.cinemaList,n.value=e.modelValue.seo,l.value=e.modelValue.deleteImgList})),(0,i.YP)([a,n,l],o),{cinemaList:a,seo:n,deleteImgList:l}},methods:{curentCinemaComponent(){}}};const Z=(0,$.Z)(S,[["render",k],["__scopeId","data-v-2c450789"]]);var H=Z,x={components:{card:b.Z,LanguageComponent:h.Z,checkboxComponent:c.Z,contactForm:H},setup(){const e=(0,m.Xw)();return{v$:e}},data(){return{name:"Contacts",checkedPage:!0,cloudFirestore:new r.r,cloudStorage:new u.o,languages:[{id:0,name:"Українська",abbreviation:"Ua",collection:p.LS,checked:!1,data:{cinemaList:[{id:0,name:"",address:"",coordinates:"",logoImg:{},deleteImgList:[]},{id:1,name:"",address:"",coordinates:"",logoImg:{},deleteImgList:[]},{id:2,name:"",address:"",coordinates:"",logoImg:{},deleteImgList:[]}],seo:{},deleteImgList:[]}},{id:1,name:"Англійська",abbreviation:"En",collection:p.Kd,checked:!0,data:{cinemaList:[{id:0,name:"",address:"",coordinats:"",logoImg:{},deleteImgList:[]},{id:1,name:"",address:"",coordinates:"",logoImg:{},deleteImgList:[]},{id:2,name:"",address:"",coordinates:"",logoImg:{},deleteImgList:[]}],seo:{},deleteImgList:[]}}],title:"Контакти",isLoading:!1}},validations(){const e=this;return{languages:[...(()=>{const t=[{data:{name:{required:g.C1},description:{required:g.C1},logoImg:{required:g.C1}}}];return e.languages.forEach(((e,a)=>{a>0&&t.push({data:{name:{required:g.C1},description:{required:g.C1},logoImg:{required:g.C1}}})})),t})()]}},computed:{currentLanguage(){const e=this.languages.find((e=>!0===e.checked));return e||{}},id(){return this.name}},async created(){this.isLoading=!0,await this.GetFile(this.languages[0]),await this.GetFile(this.languages[1]),this.isLoading=!1},methods:{GetFile(e){this.cloudFirestore.getDocument(e.collection,this.name).then((t=>{t&&(this.checkedPage=t.checkedPage,Object.assign(e.data,t))}))},async DeleteFirebaseImages(e,t){if(void 0!==e&&e.length>0)for(const a of e)await this.cloudStorage.DeleteFileInFirebaseStorage(t,a)},async AddFirebaseImage(e,t){e.src?(e.link=await this.cloudStorage.UploadFile(t,e),delete e.src):e={}},async AddFirebaseImages(e,t){if(e&&e.length)for(let a=0;a<e.length;a++){const i=e[a];i.src&&(i.link=await this.cloudStorage.UploadFile(t,i),delete i.src)}},async AddFirebaseData(e,t){const a=await{checkedPage:this.checkedPage,fileName:this.id,name:e.name,description:e.description,mainImg:e.mainImg,galleryImg:e.galleryImg,seo:e.seo,datePublication:f.ou.now().toFormat("dd.LL.yyyy")};await this.cloudFirestore.AddDocument(t,this.id,a)},async Reset(){this.isLoading=!0,await this.GetFile(this.currentLanguage),I().success("Дані успішно скинуто"),this.isLoading=!1},async Save(){if(this.isLoading=!0,await this.v$.$validate()){for(let e=0;e<this.languages.length;e++)await this.DeleteFirebaseImages(this.languages[e].data.deleteImgList,`${this.name}/${this.languages[e].abbreviation}/${this.id}`),this.languages[e].data.deleteImgList=[],await this.AddFirebaseImage(this.languages[e].data.mainImg,`${this.name}/${this.languages[e].abbreviation}/${this.id}`),await this.AddFirebaseImages(this.languages[e].data.galleryImg,`${this.name}/${this.languages[e].abbreviation}/${this.id}`),await this.AddFirebaseData(this.languages[e].data,this.languages[e].collection);I().success("Дані успішно збережено")}else I().warning("Введіть всі дані");this.isLoading=!1}}};const P=(0,$.Z)(x,[["render",d]]);var q=P}}]);
//# sourceMappingURL=330.2288bbdc.js.map