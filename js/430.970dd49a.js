"use strict";(self["webpackChunkkinocms"]=self["webpackChunkkinocms"]||[]).push([[430],{5013:function(t,e,l){l.r(e),l.d(e,{default:function(){return N}});var n=l(3396);function a(t,e,l,a,o,s){const i=(0,n.up)("list-elements");return(0,n.wg)(),(0,n.j4)(i)}function o(t,e,l,a,o,s){const i=(0,n.up)("table-component"),d=(0,n.up)("modal-component");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(i,{title:"Список сторінок",part:o.part,isLoading:o.isLoading,modelValue:o.table,"onUpdate:modelValue":e[0]||(e[0]=t=>o.table=t),onDelete:s.Delete,onUpdateList:s.UpdateLIst},null,8,["part","isLoading","modelValue","onDelete","onUpdateList"]),(0,n.Wm)(d,{modelValue:o.showWarning,"onUpdate:modelValue":e[1]||(e[1]=t=>o.showWarning=t),id:o.deleteElement,onDelete:s.DeleteFile},null,8,["modelValue","id","onDelete"])],64)}var s=l(4592),i=l(7139);const d=t=>((0,n.dD)("data-v-7f70faa0"),t=t(),(0,n.Cn)(),t),r=d((()=>(0,n._)("i",{class:"fas fa-sync-alt"},null,-1))),c=[r],u=d((()=>(0,n._)("i",{class:"fas fa-plus-circle"},null,-1))),m=[u],p={class:"table table-sm"},h={class:"list-line"},b=["onClick"],g=d((()=>(0,n._)("i",{class:"fas fa-pencil-alt"},null,-1))),w=[g],f=["onClick"],_=d((()=>(0,n._)("i",{class:"fas fa-trash-alt"},null,-1))),D=[_];function k(t,e,l,a,o,s){const d=(0,n.up)("card-component");return(0,n.wg)(),(0,n.j4)(d,null,{tools:(0,n.w5)((()=>[(0,n._)("button",{type:"button",class:"btn btn-tool",onClick:e[0]||(e[0]=(...t)=>s.UpdateLIst&&s.UpdateLIst(...t))},c),(0,n._)("button",{onClick:e[1]||(e[1]=t=>s.NewElement()),class:"button-list"},m)])),body:(0,n.w5)((()=>[(0,n._)("table",p,[(0,n._)("thead",null,[(0,n._)("tr",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.modelValue.thead,(t=>((0,n.wg)(),(0,n.iD)("th",{key:t},(0,i.zw)(t),1)))),128))])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.modelValue.tbody,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",h,(0,i.zw)(t.name),1),(0,n._)("td",null,(0,i.zw)(t.datePublication),1),(0,n._)("td",null,(0,i.zw)(!0===t.checkedPage?"Вкл":"Викл"),1),(0,n._)("td",null,[(0,n._)("button",{onClick:e=>s.EditElement(t.fileName),class:"button-list"},w,8,b),t.id?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:e=>s.DeleteElement(t.fileName),class:"button-list"},D,8,f)):(0,n.kq)("",!0)])])))),128))])])])),_:1})}l(7658);var y=l(1994),C={components:{cardComponent:y.Z},props:{modelValue:Object,part:{type:String,default:"News"}},methods:{DeleteElement(t){this.$emit("delete",t)},UpdateLIst(){this.$emit("updateList")},EditElement(t){this.$router.push(`/${this.part}/${t}`)},NewElement(){this.$router.push(`/${this.part}/New_${this.part}`)}}},L=l(89);const v=(0,L.Z)(C,[["render",k],["__scopeId","data-v-7f70faa0"]]);var E=v,$=l(4494),V=l(151),S=l(3027),F={components:{tableComponent:E,ModalComponent:S.Z},data(){return{part:"Pages",isLoading:!1,cloudFirestore:new $.r,cloudStorage:new V.o,deleteElement:"",showWarning:!1,table:{thead:["Назва","Дата створення","Статус","Управління"],tbody:[]}}},created(){this.GetList()},methods:{Delete(t){this.deleteElement=t,this.showWarning=!0},UpdateLIst(){this.GetList()},async DeleteFile(t){this.isLoading=!0,this.deleteElement=t,console.log(t),this.showWarning=!0,await this.cloudStorage.DeleteFolderInFirebaseStorage(`${this.part}/En/${t}`),await this.cloudStorage.DeleteFolderInFirebaseStorage(`${this.part}/Ua/${t}`),await this.cloudFirestore.DeleteDocument(s.Kd,t),await this.cloudFirestore.DeleteDocument(s.LS,t),this.GetList(),this.isLoading=!1},async GetList(){try{this.isLoading=!0;const t=await this.cloudFirestore.GetAllDocuments(s.Kd);this.table.tbody=t.docs.map((t=>t.data())),this.isLoading=!1}catch(t){console.error("Error getting documents: ",t)}}}};const U=(0,L.Z)(F,[["render",o]]);var I=U,W={components:{listElements:I}};const Z=(0,L.Z)(W,[["render",a]]);var N=Z},3027:function(t,e,l){l.d(e,{Z:function(){return g}});var n=l(3396),a=l(7139);const o={class:"modal-dialog"},s={class:"modal-content bg-warning"},i={class:"modal-header"},d=(0,n._)("h4",{class:"modal-title"},"Ви дійсно хочете видалити фільм?",-1),r=(0,n._)("span",{"aria-hidden":"true"},"×",-1),c=[r],u={class:"modal-footer justify-content-between"};function m(t,e,l,r,m,p){return(0,n.wg)(),(0,n.iD)("div",{class:(0,a.C_)(["modal fade",{show:l.modelValue}]),style:(0,a.j5)(p.modalStyle)},[(0,n._)("div",o,[(0,n._)("div",s,[(0,n._)("div",i,[d,(0,n._)("button",{type:"button",class:"close","data-dismiss":"modal",onClick:e[0]||(e[0]=(...t)=>p.Cancel&&p.Cancel(...t))},c)]),(0,n._)("div",u,[(0,n._)("button",{type:"button",class:"btn btn-outline-dark",onClick:e[1]||(e[1]=(...t)=>p.Cancel&&p.Cancel(...t))},"Відмінити"),(0,n._)("button",{type:"button",class:"btn btn-outline-dark",onClick:e[2]||(e[2]=(...t)=>p.Delete&&p.Delete(...t))},"Видалити")])])])],6)}var p={props:{id:String,message:String,modelValue:{type:Boolean,default:!0}},computed:{modalStyle(){return this.modelValue?{display:"block",paddingRight:"21px"}:{}}},methods:{Delete(){this.$emit("delete",this.id),this.$emit("update:modelValue",!1)},Cancel(){this.$emit("update:modelValue",!1)}}},h=l(89);const b=(0,h.Z)(p,[["render",m]]);var g=b}}]);
//# sourceMappingURL=430.970dd49a.js.map